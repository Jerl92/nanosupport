jQuery(document).ready(function($) {

	/**
	 * Add/Remove responses
	 * @scope includes/nst-metaboxes-responses.php
	 */
	var add_response_btn	= $('#nst-add-response');
	var remove_response_btn	= $('#nst-remove-response');
    
    var count = 1;
    add_response_btn.on( 'click', function() {
    	$('<div id="nst-new-response-'+ count +'" class="nst-response-group-new"><div class="nst-row"><div class="response-user nst-new-response-color"><input type="hidden" name="nst_date[]" id="nst-date" value="'+ nst.date_time_now +'"><input type="hidden" name="nst_user[]" id="nst-user" value="'+ nst.user_id +'">'+ nst.current_user +' &mdash; <span>'+ nst.date_time_formatted +'</span><span class="go-right">New Response</span></div><div class="nst-box"><div class="nst-field"><textarea class="nst-field-item" name="nst_response[]" id="nst-response" rows="5"></textarea></div></div></div></div>').appendTo($('.nst-holder'));
    	count++;

        remove_response_btn.show();        

    }); 
    
    remove_response_btn.on( 'click', function() {
        $('.nst-response-group-new:nth-last-of-type(1)').remove();
        
        if( $('.nst-response-group-new').length < 1 )
            remove_response_btn.hide();
    });


    //delete/remove individual old, recorded responses from the DOM
    var delete_btn = $('.delete-response');
    delete_btn.each(function(){
        var delete_btn_id = $(this).attr('id');
        $(this).replaceWith( '<span id="'+ delete_btn_id +'" class="delete-response dashicons dashicons-dismiss" title="Delete Response" onclick="return confirm(\'Are you sure you want to delete the response?\');"></span>' );
    });

});